(this["webpackJsonpreact-redux-typescript"]=this["webpackJsonpreact-redux-typescript"]||[]).push([[0],{133:function(e,t,r){},134:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(29),c=r.n(a),s=r(47),i=(r(95),r(96),function(){return Object(s.b)()}),o=s.c,d=r(5),u=r.n(d),l=r(8),j=r(9),p=r.n(j),b=(r(84),r(63)),h=r.n(b);h.a.defaults.baseURL="https://proshop.ibazaldua.net";var O=h.a.create({headers:{"Content-Type":"application/json",Accept:"application/json"}}),f=h.a.create({headers:{"Content-Type":"multipart/form-data"}});O.interceptors.request.use((function(e){var t=x("user");if(t){var r=t.token;return e.headers.Authorization="Bearer ".concat(r),e}return e}),(function(e){Promise.reject(e)})),f.interceptors.request.use((function(e){var t=x("user");if(t){var r=t.token;return e.headers.Authorization="Bearer ".concat(r),e}return e}),(function(e){Promise.reject(e)}));var m=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.error("ERROR AL GUARDAR EN LOCALSTORAGE"),console.error(r)}},x=function(e){try{var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}catch(r){return console.error("ERROR AL CARGAR DE LOCALSTORAGE"),void console.error(r)}},v=function(e){return e.response&&e.response.data.message?e.response.data.message:e.message},g=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=new FormData,a=0;a<t.length;a++)n.append("images",t[a]);return n.append("product_id",r),e.next=6,f.post("/api/products/upload/",n);case 6:return c=e.sent,e.abrupt("return",c.data);case 10:e.prev=10,e.t0=e.catch(0),s=v(e.t0),p.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.put("/api/products/image/delete/",{imagesToDelete:t});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),n=v(e.t0),p.a.fire("Error",n,"error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/products/image/setMain/",{image_id:t,product_id:r});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),p.a.fire("Error","failed to update main image","error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),P=r(10),N=r(51),w=r(11),I=r(15),C=r(35),E=r(23),S=r(0),L=function(){return Object(S.jsx)("footer",{children:Object(S.jsx)(N.a,{children:Object(S.jsx)(C.a,{children:Object(S.jsx)(E.a,{className:"text-center py-3",children:"Copyright \xa9 Proshop"})})})})},A=r(48),_=r(66),R=r(17),D=r(14),M=Object(D.c)({name:"ui",initialState:{loading:!1,msgError:null},reducers:{setError:function(e,t){e.msgError=t.payload,e.loading=!1},removeError:function(e){e.msgError=null},startLoading:function(e){e.loading=!0},stopLoading:function(e){e.loading=!1}}}),U=M.actions,T=U.setError,G=U.removeError,q=U.startLoading,z=U.stopLoading,B=function(e){return e.ui.loading},$=function(e){return e.ui.msgError},F=M.reducer,J={success:!1,subtotal:0,shippingPrice:0,taxPrice:0,total:0,currentOrder:void 0,orders:[],loading:!1,error:null},H=Object(D.b)("order/getOrderById",function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=Number(t),n(Z()),e.prev=3,e.next=6,O.get("/api/orders/".concat(a));case 6:return c=e.sent,s={_id:c.data._id,orderItems:c.data.orderItems,paymentMethod:c.data.paymentMethod,shippingAddress:c.data.shippingAddress,shippingPrice:c.data.shippingPrice,subTotal:c.data.subTotal,taxPrice:c.data.taxPrice,totalPrice:c.data.totalPrice,createdAt:c.data.createdAt,deleveredAt:c.data.deleveredAt,isDelivered:c.data.isDelivered,isPaid:c.data.isPaid,paidAt:c.data.paidAt,user:c.data.user},n(ee()),e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(3),i=v(e.t0),n(T(i)),n(ee()),n(X(!1)),p.a.fire("Error",i,"error"),e.t0;case 20:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,r){return e.apply(this,arguments)}}()),W=(Object(D.b)("order/payOrder",function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=Number(t.id),n(q()),e.prev=3,e.next=6,O.put("/api/orders/".concat(a,"/pay"),t.paymentResult);case 6:e.sent,n(z()),e.next=17;break;case 10:throw e.prev=10,e.t0=e.catch(3),n(z()),c=v(e.t0),n(te(c)),p.a.fire("Error",c,"error"),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(D.c)({name:"userOrders",initialState:J,reducers:{setCurrentOrder:function(e,t){e.currentOrder=t.payload},removeCurrentOrder:function(e){e.currentOrder=void 0},setOrders:function(e,t){e.orders=t.payload},resetOrders:function(e){e.orders=[]},setSuccess:function(e,t){e.success=t.payload},setPrices:function(e,t){e.subtotal=t.payload.subTotal,e.shippingPrice=t.payload.shippingPrice,e.taxPrice=t.payload.taxPrice,e.total=t.payload.total},startLoadingOrder:function(e){e.loading=!0},finishLoadingOrder:function(e){e.loading=!1},setOrderError:function(e,t){e.error=t.payload},removeOrderError:function(e){e.error=null}},extraReducers:function(e){e.addCase(H.fulfilled,(function(e,t){e.currentOrder=t.payload}))}})),Q=W.actions,Y=Q.setCurrentOrder,V=Q.setOrders,X=Q.setSuccess,K=Q.setPrices,Z=Q.startLoadingOrder,ee=Q.finishLoadingOrder,te=Q.setOrderError,re=(Q.removeOrderError,Q.resetOrders),ne=Q.removeCurrentOrder,ae=function(e){return e.userOrders.currentOrder},ce=function(e){return e.userOrders.success},se=function(e){return e.userOrders},ie=function(e){return e.userOrders.loading},oe=function(e){return e.userOrders.orders},de=function(e){return e.userOrders.error},ue=W.reducer,le=function(e){return function(t,r){var n=r().users.users.find((function(t){return Number(t._id)===Number(e)}));if(!n)return p.a.fire("Error","USUARIO CON ID: ".concat(e," NO ENCONTRADO EN MEMORIA"),"error"),void t(ye());t(ge(n))}},je=Object(D.c)({name:"users",initialState:{loading:!1,success:!1,error:null,users:[],selectedUser:null},reducers:{startLoadingUsers:function(e){e.loading=!0},finishLoadingUsers:function(e){e.loading=!1},setUsersError:function(e,t){e.error=t.payload},removeUsersError:function(e){e.error=null},resetUsers:function(e){e.users=[]},setUsers:function(e,t){e.users=t.payload},setSuccess:function(e,t){e.success=t.payload},setSelectedUser:function(e,t){e.selectedUser=t.payload},removeSelectedUser:function(e){e.selectedUser=null}}}),pe=je.actions,be=pe.startLoadingUsers,he=pe.finishLoadingUsers,Oe=pe.setUsersError,fe=pe.removeUsersError,me=pe.resetUsers,xe=pe.setUsers,ve=pe.setSuccess,ge=pe.setSelectedUser,ye=pe.removeSelectedUser,ke=function(e){return e.users.loading},Pe=function(e){return e.users.error},Ne=function(e){return e.users},we=function(e){return e.users.success},Ie=function(e){return e.users.selectedUser},Ce=je.reducer,Ee={isLoggedIn:!1,checking:!1,user:void 0},Se=Object(D.b)("auth/logout",(function(e,t){var r=t.dispatch;r(re()),r(me()),r(G())})),Le=Object(D.c)({name:"auth",initialState:Ee,reducers:{login:function(e,t){e.isLoggedIn=!0,e.user=t.payload},logout:function(e){e.isLoggedIn=!1,e.checking=!1,e.user=void 0},initLogin:function(e){e.checking=!0},finishLogin:function(e){e.checking=!1}},extraReducers:function(e){e.addCase(Se.fulfilled,(function(e){e.user=void 0,e.checking=!1,e.isLoggedIn=!1,localStorage.removeItem("user")}))}}),Ae=Le.actions,_e=Ae.login,Re=(Ae.logout,Ae.initLogin),De=Ae.finishLogin,Me=function(e){return e.auth.checking},Ue=function(e){return e.auth.user},Te=function(e){return e.auth.isLoggedIn},Ge=function(e){return e.auth},qe=Le.reducer,ze=r(141),Be=r(12),$e=r(142),Fe=r(53),Je=r(43);var He=function(e){var t=Object(n.useState)(e),r=Object(Be.a)(t,2),a=r[0],c=r[1];return[{values:a},{handleInputChange:function(e){c(Object(P.a)(Object(P.a)({},a),{},Object(Je.a)({},e.target.name,e.target.value)))},reset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)}}]},We=r(21),Qe={products:[],topProducts:[],productsPages:[],currentProductsPerPage:{page:1,products:[]},lastPageWithDeletedProd:0,loading:!1,hasErrors:!1,reqSuccess:!1,selectedProduct:null,pagination:{page:1,pages:1,pageSize:4},keyword:"",isSearchResults:!1,searchResults:[],currentSearchResults:void 0,searchPagination:{page:1,pages:1,pageSize:4}},Ye=function(e){return function(t,r){var n=r().products.currentProductsPerPage,a=null===n||void 0===n?void 0:n.products.find((function(t){return Number(t._id)===Number(e)}));t(a?rt(a):gt(e))}},Ve=function(e,t){return function(r,n){var a=n().products.productsPages,c=n().products.currentProductsPerPage,s=null===c||void 0===c?void 0:c.products.find((function(t){return Number(t._id)===Number(e)}));if(s){var i=Object(P.a)({},s);i.images=t.map((function(e){return e.isMain&&(i.mainImageUrl=e.url),{_id:e._id,publicId:e.publicId,url:e.url,isMain:e.isMain}}));var o=null===c||void 0===c?void 0:c.products.map((function(t){return Number(t._id)===Number(e)?i:t}));if(o){var d={page:(null===c||void 0===c?void 0:c.page)||-1,products:o},u=a.map((function(e){return Number(e.page)===Number(o)?d:e}));r(it(u)),r(ot(d))}}else p.a.fire("Error","PRODUCTO CON ID: ".concat(e," NO ENCONTRADO EN MEMORIA"),"error")}},Xe=Object(D.c)({name:"products",initialState:Qe,reducers:{initLoading:function(e){e.loading=!0},finishLoading:function(e){e.loading=!1},setReqSuccess:function(e,t){e.reqSuccess=t.payload},setLastPageWithDelProd:function(e,t){e.lastPageWithDeletedProd=t.payload},setIsSearchResults:function(e,t){e.isSearchResults=t.payload},setProducts:function(e,t){e.products=t.payload},setTopProducts:function(e,t){e.topProducts=t.payload},setProductsPages:function(e,t){e.productsPages=t.payload},setcurrentProductsPerPage:function(e,t){e.currentProductsPerPage=t.payload},setProductSearchresults:function(e,t){e.searchResults=t.payload},setCurrentSearchResults:function(e,t){e.currentSearchResults=t.payload},setkeyword:function(e,t){e.keyword=t.payload},setPagination:function(e,t){e.pagination=t.payload},setSearchPagination:function(e,t){e.searchPagination=t.payload},setProductError:function(e){e.hasErrors=!0},removeProductError:function(e){e.hasErrors=!1},setSelectedProduct:function(e,t){e.selectedProduct=t.payload},removeSelectedProduct:function(e){e.selectedProduct=null}}}),Ke=Xe.actions,Ze=Ke.initLoading,et=Ke.finishLoading,tt=(Ke.setProducts,Ke.setProductError),rt=(Ke.removeProductError,Ke.setSelectedProduct),nt=Ke.removeSelectedProduct,at=Ke.setReqSuccess,ct=Ke.setPagination,st=Ke.setkeyword,it=Ke.setProductsPages,ot=Ke.setcurrentProductsPerPage,dt=Ke.setSearchPagination,ut=Ke.setCurrentSearchResults,lt=Ke.setProductSearchresults,jt=Ke.setIsSearchResults,pt=Ke.setTopProducts,bt=Ke.setLastPageWithDelProd,ht=function(e){return e.products},Ot=function(e){return e.products.selectedProduct},ft=Xe.reducer,mt=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ze()),e.prev=1,e.next=4,O.get("/api/products/top");case 4:r=e.sent,n=r.data,t(pt(n)),t(et()),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(1),t(et()),t(at(!1)),a=v(e.t0),p.a.fire("Error",a,"error");case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},xt=function(e,t){return e.find((function(e){return Number(e.page)===Number(t.page)}))?e.map((function(e){return Number(e.page)===Number(t.page)?t:e})):[].concat(Object(We.a)(e),[t])},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o,d,l,j;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n().products.productsPages,r(Ze()),t.prev=2,t.next=5,O.get("/api/products".concat(e));case 5:c=t.sent,s=c.data.products,i=Number(c.data.page),o=Number(c.data.pages),d=Number(c.data.pageSize),l=xt(a,{page:i,products:s}),r(ct({page:i,pages:o,pageSize:d})),r(it(l)),r(ot({page:i,products:s})),r(et()),t.next=23;break;case 17:t.prev=17,t.t0=t.catch(2),r(et()),r(at(!1)),j=v(t.t0),p.a.fire("Error",j,"error");case 23:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e,r){return t.apply(this,arguments)}}()},gt=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r){var n,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ze()),t.prev=1,t.next=4,O.get("/api/products/".concat(e,"/"));case 4:n=t.sent,a=n.data,r(rt(a)),r(et()),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(1),r(et()),r(at(!1)),c=v(t.t0),p.a.fire("Error",c,"error");case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},yt=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().products.productsPages,c=n().products.pagination,s=n().products.lastPageWithDeletedProd,i="?page=".concat(e),!(s>0&&e>=s)){t.next=8;break}return r(vt(i)),e===c.pages&&r(bt(0)),t.abrupt("return");case 8:if(!(o=a.find((function(t){return t.page===e})))){t.next=13;break}return r(ct({page:e,pages:c.pages,pageSize:c.pageSize})),r(ot(o)),t.abrupt("return");case 13:r(vt(i));case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o,d,l,j,b;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n().products.searchResults,r(Ze()),t.prev=2,t.next=5,O.get("/api/products".concat(e));case 5:c=t.sent,s=c.data.products,i=Number(c.data.page),o=Number(c.data.pages),d=Number(c.data.pageSize),l={keyword:e,productPages:[{page:i,products:s}]},j=[].concat(Object(We.a)(a),[l]),r(jt(!0)),r(dt({page:i,pages:o,pageSize:d})),r(lt(j)),r(ut({page:i,products:s})),r(et()),t.next=26;break;case 19:t.prev=19,t.t0=t.catch(2),r(et()),r(at(!1)),r(jt(!1)),b=v(t.t0),p.a.fire("Error",b,"error");case 26:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e,r){return t.apply(this,arguments)}}()},Pt=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().products.searchResults,c=n().products.searchPagination,s=n().products.keyword,i="?keyword=".concat(s,"&page=").concat(e),!(o=a.find((function(e){return e.keyword===i})))){t.next=12;break}if(!(d=o.productPages.find((function(t){return t.page===e})))){t.next=12;break}return r(jt(!0)),r(dt({page:e,pages:c.pages,pageSize:c.pageSize})),r(ut(d)),t.abrupt("return");case 12:r(kt(i));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},Nt=function(){var e=Object(I.k)(),t=i(),r=He({keyword:""}),n=Object(Be.a)(r,2),a=n[0],c=n[1],s=a.values.keyword,o=c.handleInputChange,d=c.reset;return Object(S.jsxs)($e.a,{onSubmit:function(r){r.preventDefault(),s.trim().length>0?(t(st(s)),t(Pt(1)),d(),e.push("/")):e.push(e.location.pathname)},className:"d-flex mr-2",children:[Object(S.jsx)($e.a.Control,{type:"text",name:"keyword",value:s,onChange:o,className:"mr-sm-2 ml-sm-5"}),Object(S.jsx)(Fe.a,{type:"submit",variant:"outline-success",className:"p-2 ml-2",children:"Search"})]})},wt=function(){var e=o(Ue),t=i();return Object(S.jsx)("header",{children:Object(S.jsx)(A.a,{bg:"light",variant:"light",expand:"lg",collapseOnSelect:!0,children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(R.LinkContainer,{to:"/",onClick:function(){t(st("/")),t(jt(!1)),t(ut(void 0))},children:Object(S.jsx)(A.a.Brand,{children:"ProShop"})}),Object(S.jsx)(A.a.Toggle,{"aria-controls":"main-navbar-nav"}),Object(S.jsxs)(A.a.Collapse,{id:"main-navbar-nav",children:[Object(S.jsx)(Nt,{}),Object(S.jsxs)(_.a,{className:"ml-auto",children:[Object(S.jsx)(R.LinkContainer,{to:"/cart",children:Object(S.jsxs)(_.a.Link,{children:[Object(S.jsx)("i",{className:"fas fa-shopping-cart"})," Cart"]})}),e?Object(S.jsxs)(ze.a,{title:e.name,id:"username",children:[Object(S.jsx)(R.LinkContainer,{to:"/profile",children:Object(S.jsx)(ze.a.Item,{children:"Profile"})}),Object(S.jsx)(ze.a.Item,{onClick:function(){console.log("Logout we!"),t(Se())},children:"Logout"})]}):Object(S.jsx)(R.LinkContainer,{to:"/login",children:Object(S.jsxs)(_.a.Link,{children:[Object(S.jsx)("i",{className:"fas fa-user"})," Login"]})}),e&&e.isAdmin&&Object(S.jsxs)(ze.a,{title:"Admin",id:"adminmenu",children:[Object(S.jsx)(R.LinkContainer,{to:"/admin/users",children:Object(S.jsx)(ze.a.Item,{children:"Users"})}),Object(S.jsx)(R.LinkContainer,{to:"/admin/productList",children:Object(S.jsx)(ze.a.Item,{children:"Products"})}),Object(S.jsx)(R.LinkContainer,{to:"/admin/orders",children:Object(S.jsx)(ze.a.Item,{children:"Orders"})})]})]})]})]})})})},It=(r(133),function(){return Object(S.jsx)("div",{className:"lds-container",children:Object(S.jsxs)("div",{className:"lds-spinner",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{})]})})}),Ct=r(37),Et=function(e){var t=e.value,r=e.text,n=e.color;return Object(S.jsxs)("div",{className:"rating",children:[Object(S.jsx)("span",{children:Object(S.jsx)("i",{style:{color:n},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(S.jsx)("span",{children:Object(S.jsx)("i",{style:{color:n},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(S.jsx)("span",{children:Object(S.jsx)("i",{style:{color:n},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(S.jsx)("span",{children:Object(S.jsx)("i",{style:{color:n},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(S.jsx)("span",{children:Object(S.jsx)("i",{style:{color:n},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(S.jsx)("span",{children:r&&r})]})},St=function(e){var t=i(),r=function(){t(rt(e))};return Object(S.jsxs)(Ct.a,{className:"my-3 p-3 rounded",children:[Object(S.jsx)(w.Link,{to:"/product/".concat(e._id),children:Object(S.jsx)(Ct.a.Img,{variant:"top",src:e.mainImageUrl,onClick:r,className:"card-image img-fluid"})}),Object(S.jsxs)(Ct.a.Body,{children:[Object(S.jsx)(w.Link,{to:"/product/".concat(e._id),children:Object(S.jsx)(Ct.a.Title,{as:"div",onClick:r,children:Object(S.jsx)("strong",{children:e.name})})}),Object(S.jsx)(Ct.a.Text,{as:"div",children:Object(S.jsx)("div",{className:"my-3",children:Object(S.jsx)(Et,{value:e.rating,text:"".concat(e.numReviews," reviews"),color:"#f8e825"})})}),Object(S.jsxs)(Ct.a.Text,{as:"h3",children:["$",e.price]})]})]})},Lt=r(143),At=function(e){var t=e.variant,r=e.children;return Object(S.jsx)(Lt.a,{variant:t,children:r})},_t=r(144),Rt=function(e){for(var t=e.pages,r=e.page,n=(e.isAdmin,e.search,e.handleClick),a=[],c=1;c<=Number(t);c++)a.push(Number(c));return Object(S.jsx)(_t.a,{children:a.map((function(e){return Object(S.jsx)(_t.a.Item,{active:e===r,onClick:function(){return n(e)},children:e},e)}))})},Dt=function(){var e=o(ht),t=i(),r=Object(I.k)(),n=e.currentSearchResults,a=e.searchPagination,c=e.keyword,s=(null===n||void 0===n?void 0:n.products)?n.products:[];return Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{sm:12,children:Object(S.jsxs)("h1",{children:["Search results for ",c]})}),Object(S.jsx)(E.a,{sm:12,children:Object(S.jsx)(Fe.a,{variant:"warning",onClick:function(){t(jt(!1)),r.push("/")},children:"Clear search results"})}),s.map((function(e){return Object(S.jsx)(E.a,{sm:12,md:6,lg:4,xl:3,children:Object(S.jsx)(St,Object(P.a)({},e))},e._id)})),Object(S.jsx)(E.a,{sm:12,children:Object(S.jsx)(Rt,{page:a.page,pages:a.pages,search:!0,handleClick:function(e){t(Pt(e))}})})]})},Mt=r(65),Ut=r(86),Tt=function(){var e=o(ht),t=i(),r=e.loading,a=e.topProducts;Object(n.useEffect)((function(){a.length<1&&t(mt())}),[a.length,t]);return Object(S.jsxs)(E.a,{md:{span:6,offset:3},children:[r&&Object(S.jsx)(It,{}),Object(S.jsx)(Mt.a,{pause:"hover",children:a.map((function(e){return Object(S.jsx)(Mt.a.Item,{children:Object(S.jsxs)(w.Link,{to:"/product/".concat(e._id),onClick:function(){return function(e){t(rt(e))}(e)},children:[Object(S.jsx)(Ut.a,{src:e.mainImageUrl,alt:e.name,className:"img-fluid carousel-image"}),Object(S.jsx)(Mt.a.Caption,{children:Object(S.jsxs)("h4",{children:[e.name," ($ ",e.price,")"]})})]})},e._id)}))})]})},Gt=function(e){e.history;var t=o(ht),r=o($),a=o(B),c=i(),s=t.loading,d=t.pagination,u=t.isSearchResults,l=t.currentProductsPerPage,j=l?l.products:[];if(Object(n.useEffect)((function(){j.length<1&&!u&&c(yt(d.page))}),[c,j.length,u,d.page]),a)return Object(S.jsx)(It,{});if(r)return Object(S.jsx)(At,{variant:"danger",children:r});return Object(S.jsx)(S.Fragment,{children:u?Object(S.jsx)(Dt,{}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(C.a,{className:"m-4",children:[Object(S.jsx)("h2",{className:"text-center",children:"Top products"}),Object(S.jsx)(Tt,{})]}),Object(S.jsxs)(C.a,{children:[Object(S.jsx)("h1",{children:"Latest Products"}),s&&Object(S.jsx)(It,{}),j.map((function(e){return Object(S.jsx)(E.a,{sm:12,md:6,lg:4,xl:3,children:Object(S.jsx)(St,Object(P.a)({},e))},e._id)})),Object(S.jsx)(E.a,{sm:12,children:Object(S.jsx)(Rt,{page:d.page,pages:d.pages,search:!1,handleClick:function(e){c(yt(e))}})})]})]})})},qt=r(145),zt=function(e){for(var t=e.qty,r=e.countInStock,n=e.updateProduct,a=e.updateQty,c=e.product,s=[],i=0;i<r;i++)s.push(i+1);return Object(S.jsx)($e.a.Control,{as:"select",value:String(t),onChange:function(e){return function(e){a(e),c&&n&&n(c)}(e)},className:"mx-2",children:s.map((function(e){return Object(S.jsx)("option",{value:e,children:e},e)}))})},Bt={items:[],subtotal:0,shippingAddress:void 0,totalItems:0,paymentMethod:""},$t=function(e){var t=0;return e.forEach((function(e){t+=e.product.price*e.qty})),+t.toFixed(2)},Ft=function(e){return e.reduce((function(e,t){return e+t.qty}),0)},Jt=Object(D.b)("cart/shippingAddressLS",(function(e){return m("shippingAddress",e),e})),Ht=Object(D.b)("cart/paymentMethodLS",(function(e){return m("paymentMethod",e),e})),Wt=Object(D.b)("cart/reset",(function(){localStorage.removeItem("cartItems")})),Qt=Object(D.c)({name:"cart",initialState:Bt,reducers:{updateItems:function(e,t){e.items=t.payload.items,e.subtotal=t.payload.subtotal,e.totalItems=t.payload.totalItems},updateShippingAddress:function(e,t){e.shippingAddress=t.payload},updatePaymentMethod:function(e,t){e.paymentMethod=t.payload},resetCart:function(e){e.items=[],e.paymentMethod="",e.shippingAddress=void 0,e.subtotal=0,e.totalItems=0}},extraReducers:function(e){e.addCase(Jt.fulfilled,(function(e,t){e.shippingAddress=t.payload})).addCase(Ht.fulfilled,(function(e,t){e.paymentMethod=t.payload})).addCase(Wt.fulfilled,(function(e){e.items=[],e.paymentMethod="",e.shippingAddress=void 0,e.subtotal=0,e.totalItems=0}))}}),Yt=Qt.actions,Vt=Yt.updateItems,Xt=Yt.updateShippingAddress,Kt=Yt.updatePaymentMethod,Zt=(Yt.resetCart,function(e){return e.cart.items}),er=function(e){return e.cart.subtotal},tr=function(e){return e.cart.totalItems},rr=function(e){return e.cart.shippingAddress},nr=function(e){return e.cart},ar=Qt.reducer,cr={loading:!1,loadingReview:!1,createReviewSuccess:!1,selectedProductReviews:void 0,reviews:[]},sr=Object(D.c)({name:"reviews",initialState:cr,reducers:{setLoading:function(e,t){e.loading=t.payload},setLoadingReview:function(e,t){e.loading=t.payload},setCreateReviewSuccess:function(e,t){e.createReviewSuccess=t.payload},setReviews:function(e,t){e.reviews=t.payload},setSelectedProductReviews:function(e,t){e.selectedProductReviews=t.payload}}}),ir=sr.actions,or=ir.setLoading,dr=ir.setReviews,ur=ir.setSelectedProductReviews,lr=ir.setLoadingReview,jr=ir.setCreateReviewSuccess,pr=function(e){return e.reviews.loading},br=function(e){return e.reviews.selectedProductReviews},hr=function(e){return e.reviews.loadingReview},Or=function(e){return e.reviews.createReviewSuccess},fr=sr.reducer,mr=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n().reviews.reviews,r(or(!0)),t.prev=2,t.next=5,O.get("/api/products/".concat(e,"/reviews/"));case 5:c=t.sent,s=c.data,i=[].concat(Object(We.a)(a),[{productId:e,productReviews:s}]),r(dr(i)),r(ur(s)),r(or(!1)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(2),r(or(!1)),o=v(t.t0),p.a.fire("Error",o,"error");case 18:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,r){return t.apply(this,arguments)}}()},xr=function(e){var t=e.reviews;e.numReviews;return Object(S.jsx)(qt.a,{children:t.map((function(e){return Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsx)("strong",{children:e.name}),Object(S.jsx)(Et,{value:e.rating,color:"#f8e825"}),Object(S.jsx)("p",{children:e.createdAt.substring(0,10)}),Object(S.jsx)("p",{children:e.comment})]},e._id)}))})},vr=function(e){var t=e.productId,r=i(),a=o(Ge),c=o(hr),s=o(Or),d=a.user,j=He({rating:"",comment:""}),b=Object(Be.a)(j,2),h=b[0],f=b[1],m=h.values,x=m.rating,g=m.comment,y=f.handleInputChange,k=f.reset;Object(n.useEffect)((function(){s&&k()}),[s,k]);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h4",{children:"Write a Review"}),c&&Object(S.jsx)(It,{}),Object(S.jsx)(qt.a,{children:Object(S.jsx)(qt.a.Item,{children:d?Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),r(function(e,t){return function(){var r=Object(l.a)(u.a.mark((function r(n,a){var c,s,i,o,d,l,j,b,h,f,m,x,g,y,k;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=a().reviews.reviews,s=a().products.productsPages,i=a().products.currentProductsPerPage,o=a().products.pagination,i){r.next=6;break}return r.abrupt("return");case 6:if(d=i.products.find((function(t){return Number(t._id)===Number(e)}))){r.next=14;break}return n(lr(!1)),n(jr(!1)),n(yt(o.page)),p.a.fire("Error","Loading product in the background, please wait 2s and try again","error"),r.abrupt("return");case 14:return n(lr(!0)),r.prev=15,r.next=18,O.post("/api/products/".concat(e,"/reviews/create/"),t);case 18:l=r.sent,j=l.data,b=Object(P.a)({},j.review),h=[],f=c.map((function(t){return Number(t.productId)===Number(e)?(h=[].concat(Object(We.a)(t.productReviews),[b]),{productId:e,productReviews:h}):t})),m=Object(P.a)(Object(P.a)({},d),{},{rating:j.product_rating,numReviews:j.product_num_reviews}),x=i.products.map((function(t){return Number(t._id)===Number(e)?m:t})),g={page:i.page,products:x},y=xt(s,g),n(dr(f)),n(rt(m)),n(ur(h)),n(it(y)),n(ot(g)),n(lr(!1)),n(jr(!0)),p.a.fire({position:"top-end",icon:"success",title:"Your review has been submitted!",showConfirmButton:!1,timer:2e3}),r.next=43;break;case 37:r.prev=37,r.t0=r.catch(15),n(lr(!1)),n(jr(!1)),k=v(r.t0),p.a.fire("Error",k,"error");case 43:case"end":return r.stop()}}),r,null,[[15,37]])})));return function(e,t){return r.apply(this,arguments)}}()}(t,{rating:x,comment:g}))},children:[Object(S.jsxs)($e.a.Group,{controlId:"rating",children:[Object(S.jsx)($e.a.Label,{children:"Rating"}),Object(S.jsxs)($e.a.Control,{as:"select",value:x,name:"rating",onChange:y,children:[Object(S.jsx)("option",{value:"",children:"Select ..."}),Object(S.jsx)("option",{value:"1",children:"1 - Poor"}),Object(S.jsx)("option",{value:"2",children:"2 - Fair"}),Object(S.jsx)("option",{value:"3",children:"3 - Good"}),Object(S.jsx)("option",{value:"4",children:"4 - Very Good"}),Object(S.jsx)("option",{value:"5",children:"5 - Excellent"})]})]}),Object(S.jsxs)($e.a.Group,{controlId:"comment",children:[Object(S.jsx)($e.a.Label,{children:"Review"}),Object(S.jsx)($e.a.Control,{as:"textarea",name:"comment",value:g,onChange:y})]}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",disabled:c,className:"mt-3",children:"Submit"})]}):Object(S.jsxs)(At,{variant:"info",children:["Please ",Object(S.jsx)(w.Link,{to:"/login",children:"login"})," to write a review"]})})})]})},gr=function(e){var t=Object(n.useState)(1),r=Object(Be.a)(t,2),a=r[0],c=r[1],s=i(),d=o(pr),j=o(hr),p=o(br),b=Object(I.k)();Object(n.useEffect)((function(){var t;return(!p||p&&Number(p[0].product)!==Number(e._id))&&s((t=e._id,function(){var e=Object(l.a)(u.a.mark((function e(r,n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().reviews.reviews,!(c=a.find((function(e){return Number(e.productId)===Number(t)})))){e.next=5;break}return r(ur(c.productReviews)),e.abrupt("return");case 5:r(mr(t));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),function(){s(nt()),s(jr(!1))}}),[s,p,e._id]);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(C.a,{className:"justify-content-center",children:[Object(S.jsx)(E.a,{md:4,children:e.images?Object(S.jsx)(Mt.a,{pause:"hover",children:e.images.map((function(t){return Object(S.jsx)(Mt.a.Item,{interval:3e3,children:Object(S.jsx)("img",{className:"img-fluid ",src:t.url,alt:e.name})},t.url)}))}):null}),Object(S.jsx)(E.a,{md:4,children:Object(S.jsxs)(qt.a,{variant:"flush",children:[Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)("h3",{children:e.name})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)(Et,{value:e.rating,text:"".concat(e.numReviews," reviews"),color:"#f8e825"})}),Object(S.jsxs)(qt.a.Item,{children:["Price: $",e.price]}),Object(S.jsxs)(qt.a.Item,{children:["Description: $",e.description]})]})}),Object(S.jsx)(E.a,{md:4,children:Object(S.jsx)(Ct.a,{children:Object(S.jsxs)(qt.a,{variant:"flush",children:[Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Price:"}),Object(S.jsx)(E.a,{children:Object(S.jsxs)("strong",{children:["$",e.price]})})]})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Status:"}),Object(S.jsx)(E.a,{children:e.countInStock>0?"In Stock":"Out of Stock"})]})}),e.countInStock>0&&Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Qty"}),Object(S.jsx)(E.a,{xs:"auto",children:Object(S.jsx)(zt,{qty:a,countInStock:e.countInStock,updateQty:function(e){var t=e.target.value;c(Number(t))}})})]})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)(Fe.a,{className:"btn-block",type:"button",disabled:0===e.countInStock,onClick:function(){s(function(e){return function(t,r){var n=r().cart.items,a=n.find((function(t){return t.product._id===e.product._id})),c=[];c=a?n.map((function(t){return t.product._id===a.product._id?(e.qty+=t.qty,e):t})):[].concat(Object(We.a)(n),[e]);var s=$t(c),i=Ft(c);localStorage.setItem("cartItems",JSON.stringify({items:c,subtotal:s,totalItems:i})),t(Vt({items:c,subtotal:s,totalItems:i}))}}({product:e,qty:a})),b.push("/cart/".concat(e._id,"?qty=").concat(a))},children:"ADD TO CART"})})]})})})]}),Object(S.jsxs)(C.a,{children:[Object(S.jsxs)(E.a,{md:6,children:[Object(S.jsx)("h3",{children:"Reviews"}),d?Object(S.jsx)(It,{}):p&&p.length>0?Object(S.jsx)(xr,{reviews:Object(We.a)(p),numReviews:e.numReviews}):Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(At,{variant:"info",children:"No Reviews"})})]}),Object(S.jsxs)(E.a,{md:6,children:[j&&Object(S.jsx)(It,{}),Object(S.jsx)(vr,{productId:e._id})]})]})]})},yr=function(e){var t=e.match,r=i(),a=o(Ot),c=o(B),s=o($),d=t.params.id;return Object(n.useEffect)((function(){a||c||r(Ye(d))}),[a,r,d,c]),c?Object(S.jsx)(It,{}):Object(S.jsxs)("div",{children:[Object(S.jsx)(w.Link,{to:"/",className:"btn btn-light my-2",children:"Go Back"}),a?Object(S.jsx)(gr,Object(P.a)({},a)):Object(S.jsx)(At,{variant:"danger",children:s})]})},kr=function(e){var t=e.items,r=Object(n.useState)(void 0),a=Object(Be.a)(r,2),c=a[0],s=a[1],o=Object(n.useState)(void 0),d=Object(Be.a)(o,2),u=d[0],l=d[1],j=i(),p=function(e){var t=e.target.value;s(Number(t))},b=function(e){l(e)},h=function(e){j(function(e){return function(t,r){var n=r().cart.items.filter((function(t){return t.product._id!==e})),a=$t(n),c=Ft(n);localStorage.setItem("cartItems",JSON.stringify({items:n,subtotal:a,totalItems:c})),t(Vt({items:n,subtotal:a,totalItems:c}))}}(e))},O=Object(n.useCallback)((function(){var e,t;(t=u)&&j((e={product:t,qty:c||1},function(t,r){var n=r().cart.items,a=n.find((function(t){return t.product._id===e.product._id})),c=[];c=a?n.map((function(t){return t.product._id===a.product._id?e:t})):[].concat(Object(We.a)(n),[e]);var s=$t(c),i=Ft(c);localStorage.setItem("cartItems",JSON.stringify({items:c,subtotal:s,totalItems:i})),t(Vt({items:c,subtotal:s,totalItems:i}))}))}),[u,j,c]);return Object(n.useEffect)((function(){O()}),[O]),Object(S.jsx)(qt.a,{variant:"flush",children:t.map((function(e){return Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{xs:2,children:Object(S.jsx)(Ut.a,{src:e.product.mainImageUrl,alt:e.product.name,fluid:!0,rounded:!0})}),Object(S.jsx)(E.a,{xs:"auto",md:3,children:Object(S.jsx)(w.Link,{to:"/product/".concat(e.product._id),children:e.product.name})}),Object(S.jsxs)(E.a,{xs:3,children:["$",e.product.price]}),Object(S.jsx)(E.a,{xs:2,md:3,children:Object(S.jsx)(zt,{qty:e.qty,product:e.product,updateQty:p,updateProduct:b,countInStock:e.product.countInStock})}),Object(S.jsx)(E.a,{xs:1,md:1,children:Object(S.jsx)(Fe.a,{type:"button",size:"sm",variant:"danger",onClick:function(){return h(e.product._id)},children:Object(S.jsx)("i",{className:"fas fa-trash"})})})]})},e.product._id)}))})},Pr=function(){var e=Object(I.k)(),t=o(er),r=o(tr);return Object(S.jsxs)(Ct.a,{children:[Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsxs)("h3",{children:[r," items"]}),Object(S.jsxs)("h5",{children:["Subtotal: $",t]})]}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)(Fe.a,{type:"button",className:"btn-block",onClick:function(){e.push("/login?redirect=shipping")},children:"Proced To Checkout"})})]})},Nr=function(){console.log("Iniciando CARTSCREEN");var e=o(Zt);return Object(S.jsxs)(C.a,{className:"mt-3",children:[Object(S.jsxs)(E.a,{md:8,children:[Object(S.jsx)("h1",{children:"Shopping Cart"}),0===e.length?Object(S.jsxs)(At,{variant:"warning",children:["Your cart is empty ",Object(S.jsx)(w.Link,{to:"/",children:"Go back"})," "]}):Object(S.jsx)(kr,{items:e})]}),0===e.length?void 0:Object(S.jsx)(E.a,{md:4,className:"mt-5",children:Object(S.jsx)(Pr,{})})]})},wr=r(139),Ir=function(){return Object(S.jsx)(wr.a,{animation:"border",variant:"success",role:"status",style:{height:"50px",width:"50px",margin:"auto",display:"inline-block"},children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})},Cr=function(e){var t=e.location,r=e.history,a=i(),c=o(Me),s=o($),d=o(Ue),j=t.search?t.search.split("=")[1]:"/",b=He({email:"",password:""}),h=Object(Be.a)(b,2),f=h[0],x=h[1],g=f.values,y=g.email,k=g.password,P=x.handleInputChange,I=x.reset;return Object(n.useEffect)((function(){return function(){a(G())}}),[a]),Object(n.useEffect)((function(){d&&r.push(j)}),[r,d,j]),Object(S.jsx)(N.a,{children:Object(S.jsx)(C.a,{className:"justify-content-md-center",children:Object(S.jsxs)(E.a,{xs:12,md:6,children:[Object(S.jsx)("h1",{children:"Sign In"}),s&&Object(S.jsx)(At,{variant:"danger",children:s}),Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(){var r=Object(l.a)(u.a.mark((function r(n){var a,c,s;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Re()),r.prev=1,r.next=4,O.post("/api/users/login/",{username:e,password:t});case 4:a=r.sent,c={_id:a.data._id,name:a.data.name,email:a.data.email,token:a.data.token,isAdmin:a.data.isAdmin},m("user",c),n(_e(c)),n(De()),r.next=17;break;case 11:r.prev=11,r.t0=r.catch(1),n(De()),s=v(r.t0),n(T(s)),p.a.fire("Error",s,"error");case 17:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e){return r.apply(this,arguments)}}()}(y,k)),s&&c&&I()},children:[Object(S.jsxs)($e.a.Group,{controlId:"email",children:[Object(S.jsx)($e.a.Label,{children:"Email Address"}),Object(S.jsx)($e.a.Control,{type:"email",placeholder:"Enter Email",name:"email",value:y,onChange:P})]}),Object(S.jsxs)($e.a.Group,{controlId:"password",children:[Object(S.jsx)($e.a.Label,{children:"Password"}),Object(S.jsx)($e.a.Control,{type:"password",placeholder:"Enter Password",name:"password",value:k,onChange:P})]}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-2",disabled:c,children:"Sign In"}),c?Object(S.jsx)(Ir,{}):void 0]}),Object(S.jsx)(C.a,{className:"py-3",children:Object(S.jsx)(E.a,{children:Object(S.jsxs)("p",{children:["New Customer?",Object(S.jsx)(w.Link,{to:j?"/register?redirect=".concat(j):"/register",children:"Register"})]})})})]})})})},Er=function(e){var t=e.location,r=e.history,a=Object(n.useState)(void 0),c=Object(Be.a)(a,2),s=c[0],d=c[1],j=i(),b=o(Me),h=o($),f=o(Ue),x=t.search?t.search.split("=")[1]:"/",g=He({name:"",email:"",password:"",confirmPassword:""}),y=Object(Be.a)(g,2),k=y[0],P=y[1],I=k.values,L=I.name,A=I.email,_=I.password,R=I.confirmPassword,D=P.handleInputChange,M=P.reset;return Object(n.useEffect)((function(){return function(){j(G())}}),[j]),Object(n.useEffect)((function(){f&&r.push(x)}),[r,f,x]),Object(S.jsx)(N.a,{children:Object(S.jsx)(C.a,{className:"justify-content-md-center",children:Object(S.jsxs)(E.a,{xs:12,md:6,children:[Object(S.jsx)("h1",{children:"Sign In"}),s&&Object(S.jsx)(At,{variant:"danger",children:s}),h&&Object(S.jsx)(At,{variant:"danger",children:h}),Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),_!==R?d("Passwords do not match"):j(function(e,t,r){return function(){var n=Object(l.a)(u.a.mark((function n(a){var c,s,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Re()),n.prev=1,n.next=4,O.post("/api/users/register/",{email:t,password:r,name:e});case 4:c=n.sent,s={_id:c.data._id,name:c.data.name,email:c.data.email,token:c.data.token},m("user",s),a(_e(s)),a(De()),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(1),a(De()),i=v(n.t0),a(T(i)),p.a.fire("Error",i,"error");case 17:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(L,A,_)),h&&b&&M()},children:[Object(S.jsxs)($e.a.Group,{controlId:"name",children:[Object(S.jsx)($e.a.Label,{children:"Name"}),Object(S.jsx)($e.a.Control,{required:!0,type:"text",placeholder:"Enter your name",name:"name",value:L,onChange:D})]}),Object(S.jsxs)($e.a.Group,{controlId:"email",children:[Object(S.jsx)($e.a.Label,{children:"Email Address"}),Object(S.jsx)($e.a.Control,{required:!0,type:"email",placeholder:"Enter Email",name:"email",value:A,onChange:D})]}),Object(S.jsxs)($e.a.Group,{controlId:"password",children:[Object(S.jsx)($e.a.Label,{children:"Password"}),Object(S.jsx)($e.a.Control,{required:!0,type:"password",placeholder:"Enter Password",name:"password",value:_,onChange:D})]}),Object(S.jsxs)($e.a.Group,{controlId:"confirmpassword",children:[Object(S.jsx)($e.a.Label,{children:"confirm Password"}),Object(S.jsx)($e.a.Control,{required:!0,type:"password",placeholder:"Enter Password",name:"confirmPassword",value:R,onChange:D})]}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-2",disabled:b,children:"Register"}),b?Object(S.jsx)(Ir,{}):void 0]}),Object(S.jsx)(C.a,{className:"py-3",children:Object(S.jsx)(E.a,{children:Object(S.jsxs)("p",{children:["Have an Account?",Object(S.jsx)(w.Link,{to:x?"/login?redirect=".concat(x):"/login",children:"Sign In"})]})})})]})})})},Sr=r(140),Lr=Object(D.c)({name:"orderList",initialState:{isLoading:!1,orders:[]},reducers:{setOrders:function(e,t){e.orders=t.payload},setLoading:function(e,t){e.isLoading=t.payload}}}),Ar=Lr.actions,_r=Ar.setLoading,Rr=Ar.setOrders,Dr=function(e){return e.orders},Mr=Lr.reducer,Ur=function(e,t){console.log("prodPages before qty update: ",t),console.log("orderedItems: ",e);var r=t.map((function(t){var r={page:t.page,products:[]};return t.products.forEach((function(t){var n=e.find((function(e){return Number(e.product)===Number(t._id)}));if(n){var a=Object(P.a)(Object(P.a)({},t),{},{countInStock:t.countInStock-n.qty});r.products.push(a)}else r.products.push(t)})),r}));return console.log("prodPages after qty update: ",r),r},Tr=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r().cart.items,t(Z()),e.prev=2,e.next=5,O.put("/api/orders/totalPrice/",n);case 5:a=e.sent,t(K({subTotal:a.data.subTotal,taxPrice:a.data.taxPrice,shippingPrice:a.data.shippingPrice,total:a.data.totalPrice})),t(ee()),t(X(!0)),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(2),t(ee()),t(X(!1)),c=v(e.t0),t(T(c)),p.a.fire("Error",c,"error");case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}()},Gr=function(e){var t=e.history,r=Object(n.useState)(void 0),a=Object(Be.a)(r,2),c=a[0],s=a[1],d=i(),j=o(Me),b=o(oe),h=o(ie),f=o($),x=o(de),g=o(Ue),y=He({name:(null===g||void 0===g?void 0:g.name)||"",email:(null===g||void 0===g?void 0:g.email)||"",password:"",confirmPassword:""}),k=Object(Be.a)(y,2),P=k[0],N=k[1],w=P.values,I=w.name,L=w.email,A=w.password,_=w.confirmPassword,D=N.handleInputChange;Object(n.useEffect)((function(){console.log("EJECUTANDO getUserOrders desde ProfileScreen"),d(function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r().userOrders.orders.length>0)){e.next=3;break}return e.abrupt("return");case 3:return t(Z()),e.prev=4,e.next=7,O.get("/api/orders/myorders/");case 7:n=e.sent,t(V(n.data)),t(te(null)),t(ee()),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(4),t(ee()),a=v(e.t0),t(te(a)),p.a.fire("Error",a,"error");case 19:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,r){return e.apply(this,arguments)}}())}),[d]),Object(n.useEffect)((function(){return function(){d(G())}}),[d]),Object(n.useEffect)((function(){g||t.push("/login")}),[t,g]);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(C.a,{className:"text-center mt-3",children:Object(S.jsx)(E.a,{children:Object(S.jsx)("h1",{children:"User Profile"})})}),Object(S.jsxs)(C.a,{className:"mt-1",children:[Object(S.jsxs)(E.a,{md:3,children:[Object(S.jsx)("h2",{className:" text-center",children:"User Info"}),c&&Object(S.jsx)(At,{variant:"danger",children:c}),f&&Object(S.jsx)(At,{variant:"danger",children:f}),Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),A!==_?s("Passwords do not match"):(s(""),d(function(e,t,r){return function(){var n=Object(l.a)(u.a.mark((function n(a){var c,s,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Re()),n.prev=1,n.next=4,O.put("/api/users/profile/update/",{email:t,password:r,name:e});case 4:c=n.sent,s={_id:c.data._id,name:c.data.name,email:c.data.email,token:c.data.token},m("user",s),a(_e(s)),a(De()),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(1),a(De()),i=v(n.t0),a(T(i)),p.a.fire("Error",i,"error");case 17:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(I,L,A)))},children:[Object(S.jsxs)($e.a.Group,{controlId:"name",children:[Object(S.jsx)($e.a.Label,{children:"Name"}),Object(S.jsx)($e.a.Control,{required:!0,type:"text",placeholder:"Enter your name",name:"name",value:I,onChange:D})]}),Object(S.jsxs)($e.a.Group,{controlId:"email",children:[Object(S.jsx)($e.a.Label,{children:"Email Address"}),Object(S.jsx)($e.a.Control,{required:!0,type:"email",placeholder:"Enter Email",name:"email",value:L,onChange:D})]}),Object(S.jsxs)($e.a.Group,{controlId:"password",children:[Object(S.jsx)($e.a.Label,{children:"Password"}),Object(S.jsx)($e.a.Control,{type:"password",placeholder:"Enter Password",name:"password",value:A,onChange:D})]}),Object(S.jsxs)($e.a.Group,{controlId:"confirmpassword",children:[Object(S.jsx)($e.a.Label,{children:"confirm Password"}),Object(S.jsx)($e.a.Control,{type:"password",placeholder:"Enter Password",name:"confirmPassword",value:_,onChange:D})]}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-2",disabled:j,children:j?"loading":"Update"}),j?Object(S.jsx)(Ir,{}):void 0]})]}),Object(S.jsxs)(E.a,{md:9,children:[Object(S.jsx)("h2",{className:" text-center",children:"My Orders"}),h&&Object(S.jsx)(It,{}),x&&Object(S.jsx)(At,{variant:"danger",children:x}),b.length>0?Object(S.jsxs)(Sr.a,{striped:!0,responsive:!0,className:"table-sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"ID"}),Object(S.jsx)("th",{children:"Date"}),Object(S.jsx)("th",{children:"Total"}),Object(S.jsx)("th",{children:"Paid"}),Object(S.jsx)("th",{children:"Delivered"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:b.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e._id}),Object(S.jsx)("td",{children:e.createdAt.substring(0,10)}),Object(S.jsxs)("td",{children:["$",e.totalPrice]}),Object(S.jsx)("td",{children:e.isPaid?e.paidAt.substring(0,10):Object(S.jsx)("i",{className:"fas fa-times",style:{color:"red"}})}),Object(S.jsx)("td",{children:Object(S.jsx)(R.LinkContainer,{to:"/order/".concat(e._id),children:Object(S.jsx)(Fe.a,{className:"btn-sm",onClick:function(){return function(e){d(Y(e))}(e)},children:"Details"})})}),Object(S.jsx)("td",{})]},e._id)}))})]}):void 0,Object(S.jsx)(Fe.a,{className:"btn-sm",onClick:function(){d(function(){var e=Object(l.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Z()),e.prev=1,e.next=4,O.get("/api/orders/myorders/");case 4:r=e.sent,t(V(r.data)),t(te(null)),t(ee()),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(1),t(ee()),n=v(e.t0),t(te(n)),p.a.fire("Error",n,"error");case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())},children:"Update user Orders"})]})]})]})},qr=function(e){var t=e.step1,r=e.step2,n=e.step3,a=e.step4;return Object(S.jsxs)(_.a,{className:"justify-content-center mb-4",children:[Object(S.jsx)(_.a.Item,{children:t?Object(S.jsx)(R.LinkContainer,{to:"/login",children:Object(S.jsx)(_.a.Link,{children:"Login"})}):Object(S.jsx)(_.a.Link,{disabled:!0,children:"Login"})}),Object(S.jsx)(_.a.Item,{children:r?Object(S.jsx)(R.LinkContainer,{to:"/shipping",children:Object(S.jsx)(_.a.Link,{children:"Shipping"})}):Object(S.jsx)(_.a.Link,{disabled:!0,children:"Shipping"})}),Object(S.jsx)(_.a.Item,{children:n?Object(S.jsx)(R.LinkContainer,{to:"/payment",children:Object(S.jsx)(_.a.Link,{children:"Payment"})}):Object(S.jsx)(_.a.Link,{disabled:!0,children:"Payment"})}),Object(S.jsx)(_.a.Item,{children:a?Object(S.jsx)(R.LinkContainer,{to:"/placeorder",children:Object(S.jsx)(_.a.Link,{children:"Place Order"})}):Object(S.jsx)(_.a.Link,{disabled:!0,children:"Place Order"})})]})},zr=function(e){var t=e.history,r=o(rr),n=i(),a=He({address:(null===r||void 0===r?void 0:r.address)||"",city:(null===r||void 0===r?void 0:r.city)||"",postalCode:(null===r||void 0===r?void 0:r.postalCode)||"",country:(null===r||void 0===r?void 0:r.country)||""}),c=Object(Be.a)(a,2),s=c[0],d=c[1],u=s.values,l=u.address,j=u.city,p=u.postalCode,b=u.country,h=d.handleInputChange;return Object(S.jsx)(N.a,{children:Object(S.jsx)(C.a,{className:"justify-content-md-center",children:Object(S.jsxs)(E.a,{xs:12,md:6,children:[Object(S.jsx)(qr,{step1:!0,step2:!0}),Object(S.jsx)("h1",{children:"Shipping"}),Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),n(Jt({address:l,city:j,postalCode:p,country:b})),t.push("/payment")},children:[Object(S.jsx)($e.a.Group,{controlId:"Address",children:Object(S.jsx)($e.a.Control,{required:!0,type:"text",placeholder:"Enter your address",name:"address",value:l,onChange:h})}),Object(S.jsx)($e.a.Group,{controlId:"City",children:Object(S.jsx)($e.a.Control,{required:!0,type:"text",placeholder:"Enter your city",name:"city",value:j,onChange:h})}),Object(S.jsx)($e.a.Group,{controlId:"PostalCode",children:Object(S.jsx)($e.a.Control,{required:!0,type:"number",placeholder:"Enter your postal Code",name:"postalCode",value:p,onChange:h})}),Object(S.jsx)($e.a.Group,{controlId:"Country",children:Object(S.jsx)($e.a.Control,{required:!0,type:"text",placeholder:"Enter your country",name:"country",value:b,onChange:h})}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-3",children:"Continue"})]})]})})})},Br=function(e){var t=e.history,r=i(),a=o(rr),c=Object(n.useState)("PayPal"),s=Object(Be.a)(c,2),d=s[0],u=s[1];(null===a||void 0===a?void 0:a.address)||t.push("/shipping");return Object(S.jsx)(N.a,{children:Object(S.jsx)(C.a,{className:"justify-content-md-center",children:Object(S.jsxs)(E.a,{xs:12,md:6,children:[Object(S.jsx)(qr,{step1:!0,step2:!0,step3:!0}),Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),r(Ht(d)),r(Tr()),t.push("/placeorder")},children:[Object(S.jsxs)($e.a.Group,{controlId:"Address",children:[Object(S.jsx)($e.a.Label,{as:"legend",children:"Select Method"}),Object(S.jsx)(E.a,{children:Object(S.jsx)($e.a.Check,{type:"radio",label:"PayPal or Credit Card",id:"paypal",name:"paymentMethod",checked:!0,onChange:function(e){return u(e.target.value)}})})]}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-4",children:"continue"})]})]})})})},$r=function(e){var t,r,n,a;return Object(S.jsxs)(qt.a,{variant:"flush",children:[Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsx)("h2",{children:"Shipping"}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Shipping: "}),null===(t=e.shippingAddress)||void 0===t?void 0:t.address,", ",null===(r=e.shippingAddress)||void 0===r?void 0:r.city," ",null===(n=e.shippingAddress)||void 0===n?void 0:n.postalCode,", ",null===(a=e.shippingAddress)||void 0===a?void 0:a.country]})]}),Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsx)("h2",{children:"Payment Method"}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Method: "}),e.paymentMethod]})]}),Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsx)("h2",{children:"Order Items"}),0===e.items.length?Object(S.jsx)(At,{variant:"info",children:"Your Cart is empty"}):Object(S.jsx)(qt.a,{variant:"flush",children:e.items.map((function(e,t){return Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{md:1,children:Object(S.jsx)(Ut.a,{src:e.product.mainImageUrl,alt:e.product.name,fluid:!0,rounded:!0})}),Object(S.jsx)(E.a,{children:Object(S.jsx)(w.Link,{to:"/product/".concat(e.product._id),children:e.product.name})}),Object(S.jsxs)(E.a,{md:4,children:[e.qty," X $",e.product.price," = $",(e.qty*e.product.price).toFixed(2)]})]})},t)}))})]})]})},Fr=function(e){var t=e.subtotal,r=e.shippingPrice,n=e.taxPrice,a=e.totalPrice,c=e.placeOrderHandler,s=o($),i=o(B);return Object(S.jsx)(Ct.a,{children:Object(S.jsxs)(qt.a,{variant:"flush",children:[Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)("h2",{children:"Order Summary"})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Subtotal:"}),Object(S.jsxs)(E.a,{children:["$",t]})]})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Shipping:"}),Object(S.jsxs)(E.a,{children:["$",r]})]})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Tax:"}),Object(S.jsxs)(E.a,{children:["$",n]})]})}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{children:"Total:"}),Object(S.jsxs)(E.a,{children:["$",a]})]})}),s&&Object(S.jsx)(At,{variant:"danger",children:s}),Object(S.jsx)(qt.a.Item,{}),c?Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)(Fe.a,{type:"button",className:"btn-block",variant:"primary",onClick:c,disabled:!(!i&&!s),children:i?Object(S.jsx)(wr.a,{as:"span",size:"sm",role:"status","aria-hidden":"true",animation:"border"})+"Loading ...":"Place Order"})}):void 0]})})},Jr=function(e){var t=e.history,r=o(nr),a=i(),c=o(ae),s=o(ce),d=o(se),j=o($),b=o(B),h=o(ie);return Object(n.useEffect)((function(){h||0!==d.subtotal||b||j||a(Tr())}),[h,d.subtotal,a,b,j]),Object(n.useEffect)((function(){s&&(null===c||void 0===c?void 0:c._id)&&t.push("/order/".concat(c._id))}),[t,s,null===c||void 0===c?void 0:c._id]),Object(n.useEffect)((function(){return function(){a(G()),a(X(!1))}}),[a]),Object(S.jsxs)("div",{children:[Object(S.jsx)(qr,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{md:8,children:Object(S.jsx)($r,Object(P.a)({},r))}),Object(S.jsxs)(E.a,{md:4,children:[j&&Object(S.jsx)(At,{variant:"danger",children:j}),h?Object(S.jsx)(It,{}):Object(S.jsx)(Fr,{subtotal:d.subtotal,shippingPrice:d.shippingPrice,taxPrice:d.taxPrice,totalPrice:d.total,placeOrderHandler:function(){a(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n().products.productsPages,r(q()),t.prev=2,t.next=5,O.post("/api/orders/add/",e);case 5:c=t.sent,s={_id:c.data._id,orderItems:c.data.orderItems,paymentMethod:c.data.paymentMethod,shippingAddress:c.data.shippingAddress,shippingPrice:c.data.shippingPrice,subTotal:c.data.subTotal,taxPrice:c.data.taxPrice,totalPrice:c.data.totalPrice,createdAt:c.data.createdAt,deleveredAt:c.data.deleveredAt,isDelivered:c.data.isDelivered,isPaid:c.data.isPaid,paidAt:c.data.paidAt,user:c.data.user},i=Ur(s.orderItems,a),r(Y(s)),r(Rr([s])),r(it(i)),r(ot(void 0)),r(X(!0)),r(Wt()),r(z()),t.next=24;break;case 17:t.prev=17,t.t0=t.catch(2),r(z()),r(X(!1)),o=v(t.t0),r(T(o)),p.a.fire("Error",o,"error");case 24:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e,r){return t.apply(this,arguments)}}()}({orderItems:r.items,subTotal:d.subtotal,shippingAddress:r.shippingAddress,taxPrice:d.taxPrice,shippingPrice:d.shippingPrice,totalPrice:d.total,paymentMethod:r.paymentMethod}))}})]})]})]})},Hr=function(e){var t,r,n,a,c=i();return Object(S.jsxs)(qt.a,{variant:"flush",children:[Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsxs)("h2",{children:["Order ",e._id]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Shipping: "})," ",Object(S.jsx)("strong",{children:"Name:"})," ",e.user.name," "]}),Object(S.jsxs)("p",{children:[" ",Object(S.jsx)("strong",{children:"Email:"})," ",Object(S.jsx)("a",{href:"mailto:".concat(e.user.email),children:e.user.email})," "]}),Object(S.jsxs)("p",{children:[null===(t=e.shippingAddress)||void 0===t?void 0:t.address," ",null===(r=e.shippingAddress)||void 0===r?void 0:r.city," ",null===(n=e.shippingAddress)||void 0===n?void 0:n.postalCode,", ",null===(a=e.shippingAddress)||void 0===a?void 0:a.country]}),e.isDelivered?Object(S.jsxs)(At,{variant:"success",children:["Delivered on ",e.deleveredAt]}):Object(S.jsx)(At,{variant:"warning",children:"Not delivered"})]}),Object(S.jsxs)(qt.a.Item,{children:[Object(S.jsx)("h2",{children:"Payment Method"}),Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Method: "}),e.paymentMethod]}),e.isPaid?Object(S.jsxs)(At,{variant:"success",children:["Paid on ",e.paidAt]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(At,{variant:"warning",children:"Not paid"}),Object(S.jsx)(Fe.a,{type:"button",variant:"primary",onClick:function(){return c((t=e._id,function(){var e=Object(l.a)(u.a.mark((function e(r,n){var a,c,s,i,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().orders.orders,c=a.find((function(e){return Number(e._id)===Number(t)}))){e.next=5;break}return p.a.fire("Error","ORDEN CON ID: ".concat(t," NO ENCONTRADO EN MEMORIA"),"error"),e.abrupt("return");case 5:return r(Z()),e.prev=6,e.next=9,O.put("/api/orders/".concat(t,"/pay"),{});case 9:s=e.sent,console.log("response from payOrder()",s),i=Object(P.a)(Object(P.a)({},c),{},{isPaid:!0,paidAt:s.data.paidAt}),o=a.map((function(e){return Number(e._id)===Number(t)?i:e})),r(Y(i)),r(Rr(o)),r(ee()),r(X(!0)),e.next=26;break;case 19:e.prev=19,e.t0=e.catch(6),r(ee()),r(X(!1)),d=v(e.t0),r(T(d)),p.a.fire("Error",d,"error");case 26:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t,r){return e.apply(this,arguments)}}()));var t},children:"Pay Order"})]})]}),Object(S.jsx)(qt.a.Item,{children:Object(S.jsx)(qt.a,{variant:"flush",children:e.orderItems.map((function(e,t){return Object(S.jsx)(qt.a.Item,{children:Object(S.jsxs)(C.a,{children:[Object(S.jsx)(E.a,{md:1,children:Object(S.jsx)(Ut.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(S.jsx)(E.a,{children:Object(S.jsx)(w.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(S.jsxs)(E.a,{md:4,children:[e.qty," X $",e.price," = $",(e.qty*e.price).toFixed(2)]})]})},e._id)}))})})]})},Wr=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_r(!0)),e.prev=1,e.next=4,O.get("/api/orders/");case 4:r=e.sent,n=r.data,t(Rr(n)),t(_r(!1)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),t(_r(!1)),a=v(e.t0),p.a.fire("Error",a,"error");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},Qr=function(e){var t=e.match,r=e.history,a=t.params.id,c=i(),s=o(ae),d=o($),j=o(B),b=o(Ge).user;s||j||c(H(a)),Object(n.useEffect)((function(){return b||r.push("/login"),function(){c(G()),c(ne())}}),[c,r,b]);return console.log("order: ",s),Object(S.jsx)("div",{children:Object(S.jsxs)(C.a,{children:[Object(S.jsxs)(E.a,{md:8,children:[d&&Object(S.jsx)(At,{variant:"danger",children:d}),j&&Object(S.jsx)(It,{}),s&&Object(S.jsx)(Hr,Object(P.a)({},s))]}),Object(S.jsxs)(E.a,{md:4,className:"mt-4",children:[(null===s||void 0===s?void 0:s.subTotal)?Object(S.jsx)(Fr,{subtotal:s.subTotal,shippingPrice:s.shippingPrice,taxPrice:s.taxPrice,totalPrice:s.totalPrice}):void 0,(null===b||void 0===b?void 0:b.isAdmin)&&(null===s||void 0===s?void 0:s.isPaid)?Object(S.jsx)(Fe.a,{type:"button",variant:"success",className:"mt-3 btn btn-block",onClick:function(){var e;s&&c((e=s._id,function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().orders.orders,c=a.find((function(t){return Number(t._id)===Number(e)}))){t.next=5;break}return p.a.fire("Error","ORDEN CON ID: ".concat(e," NO ENCONTRADO EN MEMORIA"),"error"),t.abrupt("return");case 5:return r(_r(!0)),t.prev=6,t.next=9,O.put("/api/orders/".concat(e,"/deliver/"),{});case 9:s=t.sent,i=Object(P.a)(Object(P.a)({},c),{},{isDelivered:!0,deleveredAt:s.data.deliveredAt}),o=a.map((function(t){return Number(t._id)===Number(e)?i:t})),r(Y(i)),r(Rr(o)),r(_r(!1)),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(6),r(_r(!1)),d=v(t.t0),p.a.fire("Error",d,"error");case 22:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e,r){return t.apply(this,arguments)}}()))},disabled:!(!s||!s.isDelivered),children:s&&s.isDelivered?"Delivered":"Mark as delivered"}):void 0]})]})})},Yr=function(e){e.history;var t=i(),r=o(Ne),a=r.loading,c=r.error,s=r.users;Object(n.useEffect)((function(){t(function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r().users.users.length){e.next=3;break}return e.abrupt("return");case 3:return t(be()),e.prev=4,e.next=7,O.get("/api/users");case 7:n=e.sent,t(xe(n.data)),t(he()),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),t(he()),a=v(e.t0),t(Oe(a)),p.a.fire("Error",a,"error");case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,r){return e.apply(this,arguments)}}())}),[t]);var d=function(e){window.confirm("Are you sure you want to delete this user?")&&t(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().users.users,c=a.find((function(t){return t._id===e}))){t.next=5;break}return console.log("USUARIO CON ID: ".concat(e," NO ENCONTRADO EN MEMORIA")),t.abrupt("return");case 5:return s=a.filter((function(e){return e._id!==c._id})),r(be()),t.prev=7,t.next=10,O.delete("/api/users/delete/".concat(e,"/"));case 10:i=t.sent,console.log(i.data),r(xe(s)),r(he()),r(ve(!0)),t.next=24;break;case 17:t.prev=17,t.t0=t.catch(7),r(he()),r(ve(!1)),o=v(t.t0),r(Oe(o)),p.a.fire("Error",o,"error");case 24:case"end":return t.stop()}}),t,null,[[7,17]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Users"}),a&&Object(S.jsx)(It,{}),c&&Object(S.jsx)(At,{variant:"danger",children:c}),s.length>0?Object(S.jsxs)(Sr.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"ID"}),Object(S.jsx)("th",{children:"NAME"}),Object(S.jsx)("th",{children:"EMAIL"}),Object(S.jsx)("th",{children:"ADMIN"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:s.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e._id}),Object(S.jsx)("td",{children:e.name}),Object(S.jsx)("td",{children:e.email}),Object(S.jsx)("td",{children:e.isAdmin?Object(S.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(S.jsx)("i",{className:"fas fa-check",style:{color:"red"}})}),Object(S.jsxs)("td",{children:[Object(S.jsx)(R.LinkContainer,{to:"/admin/user/".concat(e._id,"/edit"),children:Object(S.jsx)(Fe.a,{variant:"light",className:"btn-sm",onClick:function(){return r=e._id,void t(le(r));var r},children:Object(S.jsx)("i",{className:"fas fa-edit"})})}),Object(S.jsx)(Fe.a,{variant:"danger",className:"btn-sm",onClick:function(){return d(e._id)},children:Object(S.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]}):void 0]})},Vr=function(e){var t=e.match,r=e.history,a=t.params.id,c=i(),s=o(ke),d=o(Pe),j=o(Ie),b=o(we),h=Object(n.useState)((null===j||void 0===j?void 0:j.isAdmin)||!1),f=Object(Be.a)(h,2),m=f[0],x=f[1],g=He({name:(null===j||void 0===j?void 0:j.name)||"",email:(null===j||void 0===j?void 0:j.email)||""}),y=Object(Be.a)(g,2),k=y[0],P=y[1],I=k.values,C=I.name,E=I.email,L=P.handleInputChange;return Object(n.useEffect)((function(){(null===j||void 0===j?void 0:j.name)&&(null===j||void 0===j?void 0:j._id)===a||c(le(a))}),[j,a,c]),Object(n.useEffect)((function(){d||s||!b||r.push("/admin/users")}),[d,s,r,b]),Object(n.useEffect)((function(){return function(){c(fe()),c(ye())}}),[c]),Object(S.jsxs)(N.a,{children:[Object(S.jsx)(w.Link,{to:"/admin/users",children:"Go Back"}),Object(S.jsx)("h1",{children:"Edit User"}),s?Object(S.jsx)(Ir,{}):d?Object(S.jsx)(At,{variant:"danger",children:d}):Object(S.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),c(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=n().users.users).find((function(t){return Number(t._id)===Number(e._id)}))){t.next=5;break}return p.a.fire("Error","USUARIO CON ID: ".concat(e._id," NO ENCONTRADO EN MEMORIA"),"error"),t.abrupt("return");case 5:return r(be()),t.prev=6,t.next=9,O.put("/api/users/update/".concat(e._id,"/"),e);case 9:t.sent,c=a.map((function(t){return Number(t._id)===Number(e._id)?e:t})),r(xe(c)),r(ge(e)),r(he()),r(ve(!0)),t.next=24;break;case 17:t.prev=17,t.t0=t.catch(6),r(he()),r(ve(!1)),s=v(t.t0),r(Oe(s)),p.a.fire("Error",s,"error");case 24:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e,r){return t.apply(this,arguments)}}()}({_id:a,name:C,email:E,isAdmin:m}))},children:[Object(S.jsxs)($e.a.Group,{controlId:"name",children:[Object(S.jsx)($e.a.Label,{children:"Name"}),Object(S.jsx)($e.a.Control,{type:"text",placeholder:"Enter your name",name:"name",value:C,onChange:L})]}),Object(S.jsxs)($e.a.Group,{controlId:"email",children:[Object(S.jsx)($e.a.Label,{children:"Email Address"}),Object(S.jsx)($e.a.Control,{type:"email",placeholder:"Enter Email",name:"email",value:E,onChange:L})]}),Object(S.jsx)($e.a.Group,{controlId:"isadmin",children:Object(S.jsx)($e.a.Check,{type:"checkbox",label:"Is Admin",checked:m,onChange:function(e){return x(e.target.checked)}})}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-2",disabled:s,children:"Update"}),s?Object(S.jsx)(Ir,{}):void 0]})]})},Xr=function(e){var t=e.history,r=i(),a=o(ht),c=o(Ge),s=a.currentProductsPerPage,d=a.loading,j=a.hasErrors,b=a.pagination,h=c.isLoggedIn,f=s?s.products:[];Object(n.useEffect)((function(){f.length<1&&!d&&!j&&h&&r(yt(b.page))}),[r,f,d,j,h,b.page]),Object(n.useEffect)((function(){h||t.push("/login")}),[h,t]);var m=function(e){window.confirm("Are you sure you want to delete this product?")&&r(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().products.currentProductsPerPage){t.next=3;break}return t.abrupt("return");case 3:if(a.products.find((function(t){return Number(t._id)===Number(e)}))){t.next=7;break}return p.a.fire("Error","Producto CON ID: ".concat(e," NO ENCONTRADO EN MEMORIA"),"error"),t.abrupt("return");case 7:return r(Ze()),t.prev=8,t.next=11,O.delete("/api/products/delete/".concat(e,"/"));case 11:t.sent,r(bt(a.page)),r(mt()),r(yt(a.page)),r(at(!0)),r(et()),t.next=26;break;case 19:t.prev=19,t.t0=t.catch(8),r(et()),r(at(!1)),c=v(t.t0),r(tt()),p.a.fire("Error",c,"error");case 26:case"end":return t.stop()}}),t,null,[[8,19]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(S.jsxs)("div",{children:[Object(S.jsxs)(C.a,{className:"align-items-center",children:[Object(S.jsx)(E.a,{children:Object(S.jsx)("h1",{children:"Products"})}),Object(S.jsx)(E.a,{className:"text-right",children:Object(S.jsxs)(Fe.a,{className:"my-3",onClick:function(){t.push("/admin/product/create")},children:[Object(S.jsx)("i",{className:"fas fa-plus"})," Create Product"]})})]}),d&&Object(S.jsx)(It,{}),j&&Object(S.jsx)(At,{variant:"danger",children:j}),!h&&Object(S.jsxs)("h3",{children:["Inicia sesion ",Object(S.jsx)(R.LinkContainer,{to:"/login",children:"aqu\xed"})," para ver la lista de productos"]}),h&&f.length>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Sr.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"ID"}),Object(S.jsx)("th",{children:"NAME"}),Object(S.jsx)("th",{children:"PRICE"}),Object(S.jsx)("th",{children:"CATEGORY"}),Object(S.jsx)("th",{children:"BRAND"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:f.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e._id}),Object(S.jsx)("td",{children:e.name}),Object(S.jsxs)("td",{children:["$ ",e.price]}),Object(S.jsx)("td",{children:e.category}),Object(S.jsx)("td",{children:e.brand}),Object(S.jsxs)("td",{children:[Object(S.jsx)(R.LinkContainer,{to:"/admin/product/".concat(e._id,"/edit"),children:Object(S.jsx)(Fe.a,{variant:"light",className:"btn-sm",onClick:function(){return t=e._id,void r(Ye(t));var t},children:Object(S.jsx)("i",{className:"fas fa-edit"})})}),Object(S.jsx)(Fe.a,{variant:"danger",className:"btn-sm",onClick:function(){return m(e._id)},children:Object(S.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]}),Object(S.jsx)(Rt,{page:b.page,pages:b.pages,search:!1,handleClick:function(e){r(yt(e))}})]}):Object(S.jsx)("h3",{children:"Aun no has creado ningun producto"})]})},Kr=function(e){var t=e.fileList,r=e.setFileList,a=Object(n.useState)([]),c=Object(Be.a)(a,2),s=c[0],i=c[1],o=Object(n.useRef)(null),d=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Uint8Array,e.next=4,t.arrayBuffer();case 4:return e.t2=e.sent,e.t3=new e.t1(e.t2),e.t4=[e.t3],e.t5={type:t.type},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(n.useCallback)(Object(l.a)(u.a.mark((function e(){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!t){e.next=13;break}n=0;case 3:if(!(n<t.length)){e.next=13;break}if(!(a=t.item(n))){e.next=10;break}return e.next=8,d(a);case 8:c=e.sent,r.push(URL.createObjectURL(c));case 10:n++,e.next=3;break;case 13:i(r);case 14:case"end":return e.stop()}}),e)}))),[t]);Object(n.useEffect)((function(){t&&t.length<1||j()}),[t,j]);var p=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}n=[],a=0;case 3:if(!(a<t.length)){e.next=14;break}if(!(c=t.item(a))){e.next=11;break}return e.t0=n,e.next=9,d(c);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:a++,e.next=3;break;case 14:r(t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("input",{type:"file",multiple:!0,accept:"image/*",ref:o,onChange:function(e){return p(e.target.files)}}),Object(S.jsx)(C.a,{children:s.map((function(e,n){return Object(S.jsxs)(E.a,{xs:12,md:3,children:[Object(S.jsx)("img",{src:e,width:"200px",alt:"to upload ".concat(n)}),Object(S.jsx)(Fe.a,{variant:"danger",onClick:function(){return function(e,n){var a=s.filter((function(t){return t!==e}));if(i(a),t){for(var c=new DataTransfer,d=0;d<(null===t||void 0===t?void 0:t.length);d++){var u=t[d];n!==d&&c.items.add(u)}o.current.files=c.files,r(c.files)}}(e,n)},children:"Eliminar"})]},e)}))})]})},Zr=function(e){var t=e.product,r=e.eventHandler,a=i(),c=!!t,s=Object(n.useState)(void 0),o=Object(Be.a)(s,2),d=o[0],j=o[1],p=Object(n.useState)([]),b=Object(Be.a)(p,2),h=b[0],O=b[1],f=Object(n.useState)([]),m=Object(Be.a)(f,2),x=m[0],v=m[1];Object(n.useEffect)((function(){t&&t.images&&v(t.images)}),[t]);var g=He({name:(null===t||void 0===t?void 0:t.name)||"",price:(null===t||void 0===t?void 0:t.price)||0,brand:(null===t||void 0===t?void 0:t.brand)||"",category:(null===t||void 0===t?void 0:t.category)||"",countInStock:(null===t||void 0===t?void 0:t.countInStock)||0,description:(null===t||void 0===t?void 0:t.description)||""}),y=Object(Be.a)(g,2),P=y[0],N=y[1],w=P.values,I=w.name,L=w.price,A=w.brand,_=w.category,R=w.countInStock,D=w.description,M=N.handleInputChange,U=function(){var e=Object(l.a)(u.a.mark((function e(r){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(null===t||void 0===t?void 0:t._id)?t._id:"-1",e.next=3,k(r._id,n);case 3:c=x.map((function(e){return e.url===r.url?{_id:r._id,publicId:r.publicId,url:r.url,isMain:!0}:{_id:e._id,publicId:e.publicId,url:e.url,isMain:!1}})),v(c),a(Ve(n,c));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)($e.a,{onSubmit:function(e){if(e.preventDefault(),t){var n={_id:t._id,name:I,price:L,brand:A,category:_,countInStock:R,description:D,rating:t.rating,numReviews:t.numReviews,mainImage:t.mainImage,mainImageUrl:t.mainImageUrl,images:t.images};r(n,d,h)}else{r({name:I,price:L,brand:A,category:_,countInStock:R,description:D,image:"testImage"},d)}},children:[Object(S.jsxs)($e.a.Group,{controlId:"name",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Name"}),Object(S.jsx)($e.a.Control,{type:"text",placeholder:"Enter product name",name:"name",value:I,onChange:M})]}),Object(S.jsxs)($e.a.Group,{controlId:"price",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Price"}),Object(S.jsx)($e.a.Control,{type:"number",placeholder:"Enter Price",name:"price",value:L,onChange:M})]}),c&&x.length>0?Object(S.jsxs)(C.a,{className:"my-4",children:[Object(S.jsx)(E.a,{xs:12,children:Object(S.jsx)($e.a.Label,{children:"Product Images"})}),x.map((function(e){return Object(S.jsx)(E.a,{md:3,children:Object(S.jsxs)(Ct.a,{children:[Object(S.jsx)(Ct.a.Img,{variant:"top",src:e.url}),Object(S.jsx)(Fe.a,{variant:"danger",disabled:!!e.isMain,onClick:function(){return function(e){var r=h;if(r.push(e),O(r),t&&t.images){var n=x.filter((function(t){return Number(t._id)!==Number(e._id)}));v(n)}}(e)},children:"delete"}),Object(S.jsx)(Fe.a,{variant:"primary",onClick:function(){return U(e)},disabled:!!e.isMain,children:"Set as Main Image"})]})},e.url)}))]}):null,Object(S.jsxs)($e.a.Group,{controlId:"image",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Upload Images"})," ",Object(S.jsx)("br",{}),Object(S.jsx)(Kr,{fileList:d,setFileList:j})]}),Object(S.jsxs)($e.a.Group,{controlId:"brand",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Brand"}),Object(S.jsx)($e.a.Control,{type:"text",placeholder:"Enter Brand",name:"brand",value:A,onChange:M})]}),Object(S.jsxs)($e.a.Group,{controlId:"category",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Category"}),Object(S.jsx)($e.a.Control,{type:"text",placeholder:"Enter Category",name:"category",value:_,onChange:M})]}),Object(S.jsxs)($e.a.Group,{controlId:"countInStock",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Stock"}),Object(S.jsx)($e.a.Control,{type:"number",placeholder:"Enter countInStock",name:"countInStock",value:R,onChange:M})]}),Object(S.jsxs)($e.a.Group,{controlId:"description",className:"my-3",children:[Object(S.jsx)($e.a.Label,{children:"Description"}),Object(S.jsx)($e.a.Control,{type:"text",placeholder:"Enter countInStock",name:"description",value:D,onChange:M})]}),Object(S.jsx)(Fe.a,{type:"submit",variant:"primary",className:"mt-2",children:(null===t||void 0===t?void 0:t.name)?"Update":"Create"})]})},en=function(e){var t=e.match,r=e.history,a=t.params.id,c=i(),s=o(ht),d=s.loading,j=s.hasErrors,b=s.selectedProduct,h=s.reqSuccess;Object(n.useEffect)((function(){d||j||b||c(Ye(a))}),[d,j,b,c,a]),Object(n.useEffect)((function(){return h&&r.push("/admin/productList"),function(){c(at(!1))}}),[h,r,c]);return Object(S.jsxs)(N.a,{children:[Object(S.jsx)(w.Link,{to:"/admin/productList",children:"Go Back"}),Object(S.jsx)("h1",{children:"Edit Product"}),d?Object(S.jsx)(Ir,{}):j?Object(S.jsx)(At,{variant:"danger",children:j}):Object(S.jsx)(Zr,{product:b,eventHandler:function(e,t,r){c(function(e,t,r){return function(){var n=Object(l.a)(u.a.mark((function n(a,c){var s,i,o,d,l,j,b,h,f,m;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=c().products.productsPages,i=c().products.currentProductsPerPage){n.next=4;break}return n.abrupt("return");case 4:if(i.products.find((function(t){return Number(t._id)===Number(e._id)}))){n.next=8;break}return p.a.fire("Error","PRODUCTO CON ID: ".concat(e._id," NO ENCONTRADO EN MEMORIA"),"error"),n.abrupt("return");case 8:return a(Ze()),n.prev=9,n.next=12,O.put("/api/products/update/".concat(e._id,"/"),e);case 12:if(o=n.sent,d=o.data,!(t&&t.length>0)){n.next=20;break}return n.next=17,g(t,e._id);case 17:l=n.sent,j=e.images?[].concat(Object(We.a)(e.images),Object(We.a)(l.images)):Object(We.a)(l),d.images=j;case 20:if(!(r&&r.length>0)){n.next=24;break}return n.next=23,y(r);case 23:r.forEach((function(e){var t;d.images=null===(t=d.images)||void 0===t?void 0:t.filter((function(t){return Number(t._id)!==Number(e._id)}))}));case 24:b=i.products.map((function(t){return Number(t._id)===Number(e._id)?d:t})),h={page:i.page,products:b},f=xt(s,h),a(it(f)),a(ot(h)),a(mt()),a(at(!0)),a(et()),n.next=41;break;case 34:n.prev=34,n.t0=n.catch(9),a(et()),a(at(!1)),m=v(n.t0),a(tt()),p.a.fire("Error",m,"error");case 41:case"end":return n.stop()}}),n,null,[[9,34]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t,r))}})]})},tn=function(e){var t=e.history,r=i(),a=o(ht),c=a.reqSuccess,s=a.loading;return Object(n.useEffect)((function(){return c&&t.push("/admin/productList"),function(){r(at(!1))}}),[c,t,r]),Object(S.jsxs)(N.a,{children:[Object(S.jsx)(w.Link,{to:"/admin/productList",children:"Go Back"}),Object(S.jsx)("h1",{children:"Create Product"}),s&&Object(S.jsx)(Ir,{}),Object(S.jsx)(Zr,{product:null,eventHandler:function(e,t){r(function(e,t){return function(){var r=Object(l.a)(u.a.mark((function r(n,a){var c,s,i,o,d,l,j,b,h,f,m;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=a().products.productsPages,s=a().products.pagination,n(Ze()),r.prev=3,r.next=6,O.post("/api/products/create/",e);case 6:if(i=r.sent,o=i.data,!t){r.next=15;break}return r.next=11,g(t,o._id);case 11:(d=r.sent)||p.a.fire("Error","El producto fue creado, pero hubo error al cargar las imagenes!","error"),o.images=d.images,o.mainImageUrl=d.mainImageUrl;case 15:l=c.find((function(e){return Number(e.page)===Number(s.pages)})),b=[],l&&(null===l||void 0===l?void 0:l.products.length)<s.pageSize?(j={page:l.page,products:[].concat(Object(We.a)(l.products),[o])},b=c.map((function(e){return Number(e.page)===Number(l.page)?j:e})),n(ot(j))):(h=s.pages+1,f={page:h,products:[o]},b=[].concat(Object(We.a)(c),[f]),n(ct({page:h,pages:h,pageSize:s.pageSize})),n(ot(f))),n(it(b)),n(at(!0)),n(et()),r.next=30;break;case 23:r.prev=23,r.t0=r.catch(3),n(et()),n(at(!1)),m=v(r.t0),n(tt()),p.a.fire("Error",m,"error");case 30:case"end":return r.stop()}}),r,null,[[3,23]])})));return function(e,t){return r.apply(this,arguments)}}()}(e,t))}})]})},rn=r(87);function nn(e){var t=e.isAuthenticated,r=e.authenticationPath,n=Object(rn.a)(e,["isAuthenticated","authenticationPath"]);return t?Object(S.jsx)(I.d,Object(P.a)({},n)):Object(S.jsx)(I.c,{to:{pathname:r}})}var an=function(e){e.history;var t=i(),r=o(Dr),a=r.isLoading,c=r.orders;return Object(n.useEffect)((function(){t(function(){var e=Object(l.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r().orders.orders.length>0)){e.next=3;break}return e.abrupt("return");case 3:t(Wr());case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}),[t]),Object(S.jsxs)("div",{children:[Object(S.jsxs)(C.a,{className:"align-items-center",children:[Object(S.jsx)(E.a,{children:Object(S.jsx)("h1",{children:"Orders"})}),Object(S.jsx)(E.a,{className:"text-right",children:Object(S.jsxs)(Fe.a,{className:"my-3",onClick:function(){return t(Wr())},children:[Object(S.jsx)("i",{className:"fas fa-plus"})," Refresh Orders"]})})]}),a&&Object(S.jsx)(It,{}),c.length>0?Object(S.jsxs)(Sr.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"ID"}),Object(S.jsx)("th",{children:"USER"}),Object(S.jsx)("th",{children:"DATE"}),Object(S.jsx)("th",{children:"TOTAL"}),Object(S.jsx)("th",{children:"PAID"}),Object(S.jsx)("th",{children:"DELIVERED"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:c.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e._id}),Object(S.jsx)("td",{children:e.user.name}),Object(S.jsx)("td",{children:e.createdAt&&e.createdAt.substring(0,10)}),Object(S.jsx)("td",{children:e.totalPrice}),Object(S.jsx)("td",{children:e.isPaid?Object(S.jsx)("span",{children:e.paidAt.substring(0,10)}):Object(S.jsx)("i",{className:"fas fa-ban",style:{color:"red"}})}),Object(S.jsx)("td",{children:e.isDelivered?Object(S.jsx)("span",{children:e.deleveredAt&&e.deleveredAt.substring(0,10)}):Object(S.jsx)("i",{className:"fas fa-ban",style:{color:"red"}})}),Object(S.jsx)("td",{children:Object(S.jsx)(R.LinkContainer,{to:"/order/".concat(e._id),children:Object(S.jsx)(Fe.a,{variant:"light",className:"btn-sm",onClick:function(){return t(Y(e))},children:"Details"})})})]},e._id)}))})]}):void 0]})},cn=function(){var e={isAuthenticated:o(Te),authenticationPath:"/login"};return Object(S.jsx)(w.HashRouter,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(wt,{}),Object(S.jsx)("main",{children:Object(S.jsx)(N.a,{children:Object(S.jsxs)(I.g,{children:[Object(S.jsx)(I.d,{path:"/",component:Gt,exact:!0}),Object(S.jsx)(I.d,{path:"/login",component:Cr}),Object(S.jsx)(I.d,{path:"/register",component:Er}),Object(S.jsx)(I.d,{path:"/profile",component:Gr}),Object(S.jsx)(I.d,{path:"/shipping",component:zr}),Object(S.jsx)(I.d,{path:"/placeorder",component:Jr}),Object(S.jsx)(I.d,{path:"/payment",component:Br}),Object(S.jsx)(nn,Object(P.a)(Object(P.a)({},e),{},{path:"/admin/users",component:Yr})),Object(S.jsx)(nn,Object(P.a)(Object(P.a)({},e),{},{path:"/admin/user/:id/edit",component:Vr})),Object(S.jsx)(nn,Object(P.a)(Object(P.a)({},e),{},{path:"/admin/productList",component:Xr})),Object(S.jsx)(nn,Object(P.a)(Object(P.a)({},e),{},{path:"/admin/orders",component:an})),Object(S.jsx)(nn,Object(P.a)(Object(P.a)({},e),{},{path:"/admin/product/create",component:tn})),Object(S.jsx)(nn,Object(P.a)(Object(P.a)({},e),{},{path:"/admin/product/:id/edit",component:en})),Object(S.jsx)(I.d,{path:"/product/:id",component:yr}),Object(S.jsx)(I.d,{path:"/cart/:id?",component:Nr}),Object(S.jsx)(I.d,{path:"/order/:id",component:Qr})]})})}),Object(S.jsx)(L,{})]})})},sn=function(){var e=i();return Object(n.useEffect)((function(){var t=x("cartItems"),r=x("user"),n=x("shippingAddress"),a=x("paymentMethod");t&&e(Vt(t)),r&&e(_e(r)),n&&e(Xt(n)),a&&e(Kt(a))}),[e]),Object(S.jsx)(cn,{})};function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var dn=Object(D.b)("counter/fetchCount",function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),un=Object(D.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(dn.pending,(function(e){e.status="loading"})).addCase(dn.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),ln=un.actions,jn=(ln.increment,ln.decrement,ln.incrementByAmount,un.reducer),pn=Object(D.a)({reducer:{counter:jn,ui:F,products:ft,cart:ar,auth:qe,userOrders:ue,orders:Mr,users:Ce,reviews:fr}});c.a.render(Object(S.jsx)(s.a,{store:pn,children:Object(S.jsx)(sn,{})}),document.getElementById("root"))},95:function(e,t,r){},96:function(e,t,r){}},[[134,1,2]]]);
//# sourceMappingURL=main.c304184c.chunk.js.map